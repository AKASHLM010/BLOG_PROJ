<!DOCTYPE html>
<html>
<head>
  <title>Profile</title>
</head>
<body>
  <h2>User Profile</h2>
  <div id="profileData"></div>

  <script>
    // Function to retrieve the JWT token from the cookie
    function getJWTToken() {
      const name = 'jwt' + '=';
      const decodedCookie = decodeURIComponent(document.cookie);
      const cookieArray = decodedCookie.split(';');
      for (let i = 0; i < cookieArray.length; i++) {
        let cookie = cookieArray[i];
        while (cookie.charAt(0) === ' ') {
          cookie = cookie.substring(1);
        }
        if (cookie.indexOf(name) === 0) {
          return cookie.substring(name.length, cookie.length);
        }
      }
      return '';
    }

    // Fetch the user's profile data
    function fetchUserProfileData() {
      const token = getJWTToken();

      // Make a fetch request to the server to retrieve the user's profile data
      fetch('/profile', {
        headers: {
          Authorization: 'Bearer ' + token, // Attach the JWT token in the Authorization header
        },
      })
        .then((response) => response.json())
        .then((data) => {
          // Handle the response data, such as updating the profile page with the user's data
          const profileData = document.getElementById('profileData');
          profileData.innerHTML = `
            <p>Username: ${data.username}</p>
            <p>Email: ${data.email}</p>
            <!-- Add more profile data fields as needed -->
          `;
        })
        .catch((error) => {
          // Handle any errors that occurred during the fetch request
          console.error(error);
        });
    }

    // Call the function to fetch the user's profile data
    fetchUserProfileData();
  </script>
</body>
</
