<!DOCTYPE html>
<html>
<head>
  <title>Blog App</title>
</head>
<body>
  <h1>Blog App</h1>

  <h2>All Blogs</h2>
  <ul id="blogsList"></ul>

  <h2>Create Blog</h2>
  <form id="createBlogForm">
    <label for="title">Title:</label>
    <input type="text" id="title" name="title" required><br>

    <label for="content">Content:</label>
    <textarea id="content" name="content" required></textarea><br>

    <label for="author">Author:</label>
    <input type="text" id="author" name="author" required><br>

    <button type="submit">Create</button>
  </form>

  <script>
    // Fetch all blogs
    fetch('/blogs')
      .then(response => response.json())
      .then(blogs => {
        const blogsList = document.getElementById('blogsList');
        blogs.forEach(blog => {
          const li = document.createElement('li');
          li.textContent = `Title: ${blog.title}, Author: ${blog.author}`;
          blogsList.appendChild(li);
        });
      })
      .catch(error => console.error('Error:', error));

    // Create blog
    const createBlogForm = document.getElementById('createBlogForm');
    createBlogForm.addEventListener('submit', event => {
      event.preventDefault();
      
      const title = document.getElementById('title').value;
      const content = document.getElementById('content').value;
      const author = document.getElementById('author').value;

      const blogData = {
        title: title,
        content: content,
        author: author
      };

      fetch('/blogs', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(blogData)
      })
        .then(response => response.json())
        .then(blog => {
          console.log('Created blog:', blog);
          // Clear form fields
          createBlogForm.reset();
        })
        .catch(error => console.error('Error:', error));
    });
  </script>
</body>
</html>
